/*!
 * Copyright 2018 The Fuchsia Authors. All rights reserved.
 * Use of this source code is governed by a BSD-style license that can be
 * found in the LICENSE file.
 */
!function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=1)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toArray=function(t){return Array.prototype.slice.call(t)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(2),i=r(3);new(function(){function t(){var t=this;this.extractors=[new n.MicrodataExtractor,new i.JsonLdExtractor],this.entityCache=new Map,this.observer=new MutationObserver(function(e){t.entitiesChanged(e)&&t.updateEntities()}),this.observer.observe(document,{childList:!0,attributes:!0,subtree:!0,characterData:!0,attributeOldValue:!0}),this.updateEntities()}return t.prototype.extract=function(t){for(var e=0,r=this.extractors;e<r.length;e++){var n=r[e];this.entityCache.has(n)||this.entityCache.set(n,n.extract(t))}var i=new Array;return this.entityCache.forEach(function(t){return i.push.apply(i,t)}),i},t.prototype.entitiesChanged=function(t){for(var e=!1,r=0,n=this.extractors;r<n.length;r++){var i=n[r];i.entitiesChanged(t)&&(e=!0,this.entityCache.delete(i))}return e},t.prototype.updateEntities=function(){document["fuchsia:entities"]=this.extract(document),document.dispatchEvent(new CustomEvent("fuchsia-entities-changed"))},t}())},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),i=/[ \r\n\t\f]+/,a=function(){function t(){}return t.prototype.extract=function(t){for(var e=[],r=0,i=n.toArray(t.querySelectorAll("*[itemscope]:not([itemprop])"));r<i.length;r++){var a=i[r];e.push(this.extractEntity(a,[]))}return e},t.prototype.directChild=function(t,e){for(var r=t.parentElement;r;r=r.parentElement){if(r==e)return!0;if(r.hasAttribute("itemscope"))return!1}return!1},t.prototype.itemRefs=function(t){for(var e=this,r=(t.getAttribute("itemref")||"").split(i),a=0,o=n.toArray(t.querySelectorAll("[itemref]")).filter(function(r){return e.directChild(r,t)});a<o.length;a++)for(var s=0,u=o[a].getAttribute("itemref").split(i);s<u.length;s++){var c=u[s];r.push(c)}return r},t.prototype.itemProperties=function(t){var e=this,r=n.toArray(t.querySelectorAll('[itemprop]:not([itemprop=""])')).filter(function(r){return e.directChild(r,t)});if(t.hasAttribute("itemscope")&&t.hasAttribute("itemref"))for(var a=0,o=t.getAttribute("itemref").split(i);a<o.length;a++){var s=o[a],u=document.getElementById(s);if(u)for(var c=0,p=this.itemProperties(u);c<p.length;c++){var l=p[c];r.push(l)}}return r},t.prototype.propertyValue=function(t,e){if(-1!=(e=e||[]).indexOf(t))return"ERROR";if(t.hasAttribute("itemscope"))return this.extractEntity(t,e);if(t.hasAttribute("content"))return t.getAttribute("content");if(t instanceof HTMLAudioElement||t instanceof HTMLEmbedElement||t instanceof HTMLIFrameElement||t instanceof HTMLImageElement||t instanceof HTMLSourceElement||t instanceof HTMLTrackElement||t instanceof HTMLVideoElement)return t.src||"";if(t instanceof HTMLAnchorElement||t instanceof HTMLAreaElement||t instanceof HTMLLinkElement)return t.href||"";if(t instanceof HTMLMeterElement||t instanceof HTMLDataElement){if(t.hasAttribute("value"))return t.getAttribute("value")}else if(t instanceof HTMLTimeElement&&t.hasAttribute("datetime"))return t.getAttribute("datetime");return t.textContent||""},t.prototype.extractEntity=function(t,e){var r={};(e=e||[]).push(t);var n=t.getAttribute("itemtype");n&&(r["@type"]=n.split(i)),t.hasAttribute("itemid")&&(r["@id"]=t.getAttribute("itemid"));for(var a=0,o=this.itemProperties(t);a<o.length;a++)for(var s=o[a],u=this.propertyValue(s,e),c=0,p=s.getAttribute("itemprop").split(i);c<p.length;c++){var l=p[c];r[l]||(r[l]=[]),r[l].push(u)}return r},t.prototype.isMicrodataRelated=function(t){return t instanceof Element?t.hasAttribute("itemscope")||t.hasAttribute("itemprop")||t.hasAttribute("itemtype")||t.hasAttribute("itemid")||t.hasAttribute("itemref"):!!t.parentElement&&this.isMicrodataRelated(t.parentElement)},t.prototype.entitiesChanged=function(t){for(var e=0,r=t;e<r.length;e++){var i=r[e];if("childList"===i.type){for(var a=0,o=n.toArray(i.addedNodes);a<o.length;a++){var s=o[a];if(this.isMicrodataRelated(s))return!0}for(var u=0,c=n.toArray(i.removedNodes);u<c.length;u++){s=c[u];if(this.isMicrodataRelated(s))return!0}}else{if("attributes"===i.type)return this.isMicrodataRelated(i.target);if("characterData"===i.type)return this.isMicrodataRelated(i.target)}}return!1},t}();e.MicrodataExtractor=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),i=function(){function t(){}return t.prototype.extract=function(t){for(var e=[],r=0,i=n.toArray(t.querySelectorAll("script[type='application/ld+json']"));r<i.length;r++){var a,o=i[r];try{a=JSON.parse(o.textContent)}catch(t){continue}a instanceof Array?e.push.apply(e,a):e.push(a)}return e},t.prototype.isJsonLdRelated=function(t){return t.nodeType!=Node.ELEMENT_NODE?!!t.parentNode&&this.isJsonLdRelated(t.parentNode):t instanceof HTMLScriptElement&&"application/ld+json"===t.type},t.prototype.entitiesChanged=function(t){for(var e=0,r=t;e<r.length;e++){var i=r[e];if("childList"===i.type){for(var a=0,o=n.toArray(i.addedNodes);a<o.length;a++){var s=o[a];if(this.isJsonLdRelated(s))return!0}for(var u=0,c=n.toArray(i.removedNodes);u<c.length;u++){s=c[u];if(this.isJsonLdRelated(s))return!0}}else if("attributes"===i.type){if(i.target instanceof HTMLScriptElement&&("application/ld+json"===i.target.type||"application/ld+json"===i.oldValue))return!0}else if("characterData"===i.type)return this.isJsonLdRelated(i.target)}return!1},t}();e.JsonLdExtractor=i}]);
//# sourceMappingURL=bundle.js.map