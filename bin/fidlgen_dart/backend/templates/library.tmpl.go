// Copyright 2018 The Fuchsia Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.

package templates

const Library = `
{{- define "GenerateLibraryFile" -}}
// Copyright 2018 The Fuchsia Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.
//
// WARNING: This file is machine generated by fidlgen.

library {{ .LibraryName }};

import 'dart:async';
import 'dart:typed_data';

import 'package:fidl/fidl.dart' as $fidl;
import 'package:meta/meta.dart';
import 'package:zircon/zircon.dart';

{{ range .Imports -}}
import '{{ .Url }}' as {{ .LocalName }};
{{ end -}}

// ignore_for_file: always_specify_types
// ignore_for_file: avoid_positional_boolean_parameters
// ignore_for_file: avoid_returning_null
// ignore_for_file: cascade_invocations
// ignore_for_file: constant_identifier_names
// ignore_for_file: one_member_abstracts
// ignore_for_file: prefer_constructors_over_static_methods
// ignore_for_file: prefer_single_quotes
// ignore_for_file: public_member_api_docs
// ignore_for_file: unused_import
// ignore_for_file: unused_local_variable
// ignore_for_file: non_constant_identifier_names
// ignore_for_file: library_prefixes
// ignore_for_file: prefer_typing_uninitialized_variables
// ignore_for_file: avoid_js_rounded_ints
// ignore_for_file: unnecessary_parenthesis
// ignore_for_file: always_put_required_named_parameters_first
// ignore_for_file: prefer_generic_function_type_aliases
// ignore_for_file: prefer_equal_for_default_values

{{ range $const := .Consts -}}
{{ template "ConstDeclaration" $const }}
{{ end -}}
{{ range $enum := .Enums -}}
{{ template "EnumDeclaration" $enum }}
{{ end -}}
{{ range $union := .Unions -}}
{{ template "UnionDeclaration" $union }}
{{ end -}}
{{ range $struct := .Structs -}}
{{ template "StructDeclaration" $struct }}
{{ end -}}
{{ range $interface := .Interfaces -}}
{{ template "InterfaceDeclaration" $interface }}
{{ end -}}
{{- end -}}

{{- define "ExportNames" -}}
{{ if . }}
import 'fidl.dart' show {{ range $index, $item := . }}
{{- if $index }}, {{ end -}}
{{ .Name -}}
{{ end -}};
export 'fidl.dart' show {{ range $index, $item := . }}
{{- if $index }}, {{ end -}}
{{ .Name -}}
{{ end -}};
{{ end -}}
{{- end -}}

{{- define "GenerateAsyncFile" -}}
// Copyright 2018 The Fuchsia Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.
//
// WARNING: This file is machine generated by fidlgen.

library {{ .LibraryName }}$async;

import 'dart:async';
import 'dart:typed_data';

import 'package:fidl/fidl.dart' as $fidl;
import 'package:meta/meta.dart';
import 'package:zircon/zircon.dart';

{{ range .Imports -}}
import '{{ .Url }}' as sync${{ .LocalName }};
import '{{ .AsyncUrl }}' as {{ .LocalName }};
{{ end -}}

import 'fidl.dart' as $sync;

// ignore_for_file: always_specify_types
// ignore_for_file: avoid_positional_boolean_parameters
// ignore_for_file: avoid_returning_null
// ignore_for_file: cascade_invocations
// ignore_for_file: constant_identifier_names
// ignore_for_file: one_member_abstracts
// ignore_for_file: prefer_constructors_over_static_methods
// ignore_for_file: prefer_single_quotes
// ignore_for_file: public_member_api_docs
// ignore_for_file: unused_import
// ignore_for_file: unused_local_variable
// ignore_for_file: non_constant_identifier_names
// ignore_for_file: library_prefixes
// ignore_for_file: prefer_typing_uninitialized_variables
// ignore_for_file: avoid_js_rounded_ints
// ignore_for_file: unnecessary_parenthesis
// ignore_for_file: always_put_required_named_parameters_first
// ignore_for_file: prefer_generic_function_type_aliases
// ignore_for_file: prefer_equal_for_default_values
// ignore_for_file: avoid_catches_without_on_clauses
// ignore_for_file: unused_shown_name
// ignore_for_file: directives_ordering
// ignore_for_file: unnecessary_lambdas

{{ template "ExportNames" .Consts -}}
{{ template "ExportNames" .Enums -}}
{{ template "ExportNames" .Unions -}}
{{ template "ExportNames" .Structs -}}

// ignore: unused_element, avoid_private_typedef_functions
typedef _VoidCallback = void Function();

// Converters between interface handle / request types.
// ignore: unused_element
$fidl.InterfaceHandle<NEW> _convertInterfaceHandle<OLD, NEW>($fidl.InterfaceHandle<OLD> old) => new $fidl.InterfaceHandle<NEW>(old.passChannel());
// ignore: unused_element
$fidl.InterfaceRequest<NEW> _convertInterfaceRequest<OLD, NEW>($fidl.InterfaceRequest<OLD> old) => new $fidl.InterfaceRequest<NEW>(old.passChannel());

{{ range $interface := .Interfaces -}}
{{ template "InterfaceAsyncDeclaration" $interface }}
{{ end -}}

{{- end -}}

`
